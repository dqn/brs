check:
    cargo check --workspace

test:
    cargo test --workspace

clippy:
    cargo clippy --workspace -- -D warnings

fmt:
    cargo fmt --all

fmt-check:
    cargo fmt --all -- --check

# Generate Java golden master fixtures
golden-master-gen:
    cd ../lr2oraja-java && ./gradlew golden-master:run --args="$(pwd)/../lr2oraja-rust/test-bms $(pwd)/../lr2oraja-rust/golden-master/fixtures"

# Run golden master comparison tests
golden-master-test:
    cargo test -p golden-master -- --nocapture

# Generate rule engine GM fixtures
golden-master-rule-gen:
    cd ../lr2oraja-java && ./gradlew golden-master:run -PmainClass=bms.model.golden.RuleExporter --args="$(pwd)/../lr2oraja-rust/golden-master/fixtures"

# Generate pattern shuffle GM fixtures
golden-master-pattern-gen:
    cd ../lr2oraja-java && ./gradlew golden-master:run -PmainClass=bms.model.golden.PatternExporter --args="$(pwd)/../lr2oraja-rust/golden-master/fixtures"

# Generate replay GM fixtures
golden-master-replay-gen:
    cd ../lr2oraja-java && ./gradlew golden-master:run -PmainClass=bms.model.golden.ReplayExporter --args="$(pwd)/../lr2oraja-rust/golden-master/fixtures"

# Generate all GM fixtures (parse + rule + pattern + replay)
golden-master-gen-all: golden-master-gen golden-master-rule-gen golden-master-pattern-gen golden-master-replay-gen

all: check test clippy fmt-check
